#! /usr/bin/env ruby

def debug(info)
  puts "DEBUG: #{info.is_a?(String) ? info : info.inspect}"
end

ram_source = '/Volumes/RamDisk/sr'
hd_source = '/Users/chenronghua/workspace/scarecrow-rules' 

source = ARGV[0]
source = ram_source if source == 'ram'
source = hd_source if source == 'hd'

Dir.chdir(source)
debug "git repo: #{source}"

def readSHA(target, sha)
  `git checkout #{sha}`
  return IO.read(target)
end

sha = ARGV[1]
target = ARGV[2]

start_time = Time.now.to_f

puts readSHA(target, sha)


end_time = Time.now.to_f

debug "finished in #{((end_time - start_time)*1000).to_i} ms"
